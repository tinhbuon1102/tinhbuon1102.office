typeof LiquidSpace=="undefined"&&(LiquidSpace={});typeof LiquidSpace.View=="undefined"&&(LiquidSpace.View={});LiquidSpace.View.LandingPageCommon=function(workspaces,props){var _this=this;$(window).scroll(function(){$(".hasDatepicker").datepicker("hide")});LiquidSpace.View.LandingPageCommon.prototype.workspaces=ko.observableArray(workspaces);LiquidSpace.View.LandingPageCommon.prototype.getWorkspace=function(wId){var res={};return $.each(_this.workspaces(),function(i,val){if(val.Id==wId)return res=val,!1}),res};LiquidSpace.View.LandingPageCommon.prototype.bookIt=function(wId,vId,startDate){var w=_this.getWorkspace(wId);startDate instanceof Date||(startDate=Date.fromISO(w.NextAvailableReservationTime));startDate instanceof Date||(startDate=new Date);LSHelper.Calendar.editReservation({ev:{id:"",workspace_id:wId,venue_id:vId,workspace:w,start_date:w.ReservationMethod==2?startDate:null},daysAhead:LSHelper.Constants.reservationSearchDaysAhead(),reservationSourcePage:LSHelper.Calendar.reservationSourceNames.WPP,searchFilter:_this.searchFilter,currentVenueDate:LSHelper.Calendar.toServerString(startDate)})};LiquidSpace.View.LandingPageCommon.prototype.requestTour=function(wId,vId,startDate){var w=_this.getWorkspace(wId);w.ReservationMethod==2?(startDate instanceof Date||(startDate=new Date(w.NextAvailableReservationTime)),startDate instanceof Date||(startDate=new Date)):startDate=$("#bookingDate").val()=="Today"?null:$("#bookingDate").datepicker("getDate");LSHelper.Calendar.scheduleTour({venueId:vId,workspaceId:wId,tourDate:startDate})};LiquidSpace.View.LandingPageCommon.prototype.getButtonState=function(wId,needToDoRequest,bookingMethod){var res={label:"Not Available",disabled:!0},w=_this.getWorkspace(wId),label;return w&&(w.BookItButtonState=="permission-pending"?res={label:"Permission Pending",disabled:!0}:w.BookItButtonState!="unavailable"&&(needToDoRequest?(label="Request",bookingMethod=="RequestToBook"?label="Request to Book":bookingMethod=="InquireNow"&&(label="Inquire Now"),res={label:label,disabled:!1}):res={label:"Book It Now",disabled:!1})),res};$.extend(this,props)};typeof LiquidSpace=="undefined"&&(LiquidSpace={});typeof LiquidSpace.View=="undefined"&&(LiquidSpace.View={});LiquidSpace.View.workspaceLandingPage=function(params){function getParameterByName(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search);return results===null?"":decodeURIComponent(results[1].replace(/\+/g," "))}var _self,viewModel,$elem,requestServer,setTodayValue,w,bookingDate,parsedBookingDate;params=$.extend({elem:null,model:null,images:null,wId:null,venueId:null,defaultAvailabilityValue:null,venueNowDate:null,selectedDate:null,useDynamicDatepicker:!0},params);viewModel=new LiquidSpace.View.LandingPageCommon(params.model.Workspaces,{getWorkspaceNextAvailableReservationTime:function(wId,index){var date=viewModel.getWorkspaceNextAvailableTime(wId,index);return new Date.fromISO(date).format("MM/dd ddd")},getWorkspaceNextAvailableTime:function(wId,index){var w=viewModel.getWorkspace(wId),i=0;for(var prop in w.NextAvailabilityWormClassList){if(i==index)return prop;i++}},getWorkspaceAvailabilityClass:function(wId,num,index){var w=viewModel.getWorkspace(wId),i=0;for(var prop in w.NextAvailabilityWormClassList){if(i==index)return w.NextAvailabilityWormClassList[prop][num];i++}return""},createReservation:function(venueId,workspaceId,dateStr,btn,compact,startHour,firstHourHalf,wormIndex,clsIndex,modelIndex){var cl=viewModel.getWorkspaceAvailabilityClass(workspaceId,startHour-3,modelIndex),reservationLength,startDate,ev,endDate;cl.split("-")[clsIndex].indexOf("available")>-1&&(reservationLength=60,startDate=dateStr?Date.fromISO(dateStr):!1,isNaN(startDate)&&(startDate=parseJsonDate(dateStr)),!isNaN(startDate)&&startHour&&(startDate.setHours(startHour),startDate.setMinutes(firstHourHalf?0:30)),ev={id:"",workspace_id:workspaceId,venue_id:venueId},startDate&&(endDate=new Date(startDate),endDate=new Date(endDate.setMinutes(endDate.getMinutes()+parseInt(reservationLength))),ev.start_date=startDate,ev.end_date=endDate),LSHelper.Calendar.editReservation({ev:ev,daysAhead:LSHelper.Constants.reservationSearchDaysAhead(),reservationSourcePage:LSHelper.Calendar.reservationSourceNames.WPP,exactDateAndTimeSpecified:!!(!isNaN(startDate)&&startHour)}))},showAllWorkspaceReviews:ko.observable(!1),showAllWorkspaceReviewsFunc:function(){viewModel.showAllWorkspaceReviews(!viewModel.showAllWorkspaceReviews())},showAllWorkspaces:ko.observable(!1),showAllWorkspacesFunc:function(){viewModel.showAllWorkspaces(!viewModel.showAllWorkspaces())},selectedImageIndex:ko.observable(0),imageSelected:function(i){viewModel.selectedImageIndex(i)},moveGallery:function(offset){var index=viewModel.selectedImageIndex()+offset;index>params.images.length-1&&(index=0);index<0&&(index=params.images.length-1);viewModel.imageSelected(index)},galleryNext:function(){viewModel.moveGallery(1)},galleryPrev:function(){viewModel.moveGallery(-1)},getImageByOffset:function(offset){var result={},index;return params.images&&params.images.length!=0&&(offset==0?result=params.images[viewModel.selectedImageIndex()]:(index=viewModel.selectedImageIndex()+offset,result=index>params.images.length-1?params.images[0]:index<0?params.images[params.images.length-1]:params.images[index])),result},searchFilter:params.model.SearchFilter,workspaceLandingPagePopup:function(galleryMediaType){LSHelper.HelperLib.blockUI();$.ajax({url:GetUrl("MultiMediaPopup","Venues"),data:{venueId:params.venueId,workspaceId:params.wId,galleryMediaType:galleryMediaType,imageIndex:viewModel.selectedImageIndex()},success:function(data){$(data).appendTo("body");$("body").css("overflow","hidden");$("#wlp-popup-workspace-info").length>0&&ko.applyBindings(viewModel,$("#wlp-popup-workspace-info")[0])},complete:function(){LSHelper.HelperLib.unblockUI()}})}});$elem=$(params.elem);$elem.find(".amenities-other").tooltipster({maxWidth:200});$("#wlp-map").length&&LSHelper.google.init({callback:function(){var map=new googleMaps({mapId:"wlp-map"});map.addMarker({lat:params.model.VenueWorkspaces.Venue.Latitude,long:params.model.VenueWorkspaces.Venue.Longitude,draggable:!1,content:LSHelper.html.getTemplateString("#marker-template"),showContentByDefault:!0,appendInfoBoxToElementSelector:"#wlp-map-wrapper"});map.setZoom(17)},loadInfobox:!0});requestServer=function(date){var $elem=$("#bookingDate");$elem.attr("disabled","disabled");$.ajax({type:"POST",url:GetUrl("WorkspaceLandingPageCalculateAvailability","Venues"),data:{venueId:params.venueId,workspaceId:params.wId,startDate:date},failure:function(data){$elem.removeAttr("disabled")},success:function(data){$elem.removeAttr("disabled");var w=viewModel.getWorkspace(params.wId);w.NextAvailabilityWormClassList=data;w.NextAvailableReservationTime=date;viewModel.workspaces.replace(w,w);viewModel.searchFilter.StartTime=null;viewModel.searchFilter.ReservationStart=null;viewModel.searchFilter.ReservationLengthMinutes=null}})};setTodayValue=function(defaultValue,venueTodayStr){var userDate=(new Date).getDate(),venueDate=parseInt(venueTodayStr.split("/")[1]);userDate===venueDate?$("#bookingDate").val(defaultValue):$("#bookingDate").val(venueTodayStr)};$("#bookingDate").val()==="Today"&&setTodayValue(params.defaultAvailabilityValue,params.venueNowDate);$("#bookingDate").is(":hidden")==!1&&(LSHelper.UI.datePickerP({elem:"#bookingDate",onSelect:function(dateText,inst){requestServer(dateText)},anyDateChecked:function(){setTodayValue(params.defaultAvailabilityValue,params.venueNowDate);requestServer(params.venueNowDate)},anyDateText:params.defaultAvailabilityValue,btnImage:params.useDynamicDatepicker?"dynamic":"",minDate:params.venueNowDate,currentDate:params.selectedDate?Date.fromISO(params.selectedDate):null,buttonImageOnly:params.useDynamicDatepicker?!0:!1}),params.selectedDate&&(w=viewModel.getWorkspace(params.wId),w&&(w.NextAvailableReservationTime=params.selectedDate)));getParameterByName("confirm")&&(bookingDate=getParameterByName("startDate"),bookingDate&&(parsedBookingDate=Date.fromISO(bookingDate),typeof applyStartDate!="undefined"&&applyStartDate(parsedBookingDate),setTodayValue(params.defaultAvailabilityValue,bookingDate),viewModel.bookIt(params.wId,params.venueId,parsedBookingDate)));$.isFunction($.fn.jScroll)&&$(".wlp-top-bar").jScroll({speed:"fixed",top:0});$elem.length&&ko.applyBindings(viewModel,$elem[0]);switch(LSHelper.HelperLib.getURLParameter("action")){case"schedule-tour":viewModel.requestTour(params.wId,params.venueId,$(".inline-datepicker").datepicker("getDate"));break;case"request-book":viewModel.bookIt(params.wId,params.venueId);break}return viewModel};typeof WLP=="undefined"&&(WLP={});WLP.ViewModel=function(params){var _self=this,_originalgetButtonState,tourTimeInitialLoad;params=$.extend({VenueId:Guid.Empty,VenueFormat:null,UserIsFollowing:!1,SendMessageViewModel:null,Workspaces:null,Activites:[],Workspace:null,Images:[],SearchFilter:null,VenueNowDate:null,NextBusinessDay:null,VisaState:null,WorkspaceBookedByMember:!1,OtherFavoritesCount:0},params);params.VenueNowDate=Date.fromISO(params.VenueNowDate);params.NextBusinessDay=Date.fromISO(params.NextBusinessDay);params.Workspace.NextAvailabilityWormClassList=ko.observable(params.Workspace.NextAvailabilityWormClassList);XPP.ViewModel.call(this,params);_originalgetButtonState=this.getButtonState;this.getButtonState=function(workspaceId,needToDoRequest){return workspaceId==params.Workspace.Id?_self.actionButtonState():_originalgetButtonState(workspaceId,needToDoRequest)};this.selectedImageIndex=ko.observable(0);this.imageSelected=function(i){_self.selectedImageIndex(i)};this.moveGallery=function(offset){var index=_self.selectedImageIndex()+offset;index>params.Images.length-1&&(index=0);index<0&&(index=params.Images.length-1);_self.imageSelected(index)};this.galleryNext=function(){_self.moveGallery(1)};this.galleryPrev=function(){_self.moveGallery(-1)};this.getImageByOffset=function(offset){var result={},index;return params.Images&&params.Images.length!=0&&(offset==0?result=params.Images[_self.selectedImageIndex()]:(index=_self.selectedImageIndex()+offset,result=index>params.Images.length-1?params.Images[0]:index<0?params.Images[params.Images.length-1]:params.Images[index])),result};this.workspaceLandingPagePopup=function(galleryMediaType){LSHelper.HelperLib.blockUI();$.ajax({url:"/Venues/MultiMediaPopup",data:{venueId:params.VenueId,workspaceId:params.Workspace.Id,galleryMediaType:galleryMediaType,imageIndex:_self.selectedImageIndex()},success:function(data){$(data).appendTo("body");$("body").css("overflow","hidden");$("#wlp-popup-workspace-info").length>0&&ko.applyBindings(_self,$("#wlp-popup-workspace-info")[0])},complete:function(){LSHelper.HelperLib.unblockUI()}})};this.getWorkspaceNextAvailableReservationTime=function(index){var date=_self.getWorkspaceNextAvailableTime(index);return new Date.fromISO(date).format("MM/dd ddd")};this.getWorkspaceNextAvailableTime=function(index){var i=0,nextAvailabilityWormClassList=params.Workspace.NextAvailabilityWormClassList();for(var prop in nextAvailabilityWormClassList){if(i==index)return prop;i++}return null};this.getWorkspaceAvailabilityClass=function(num,index){var i=0,nextAvailabilityWormClassList=params.Workspace.NextAvailabilityWormClassList();for(var prop in nextAvailabilityWormClassList){if(i==index)return nextAvailabilityWormClassList[prop][num];i++}return""};this.createReservation=function(dateStr,btn,compact,startHour,firstHourHalf,wormIndex,clsIndex,modelIndex){var cl=_self.getWorkspaceAvailabilityClass(startHour-3,modelIndex),reservationLength,startDate,ev,endDate;cl.split("-")[clsIndex].indexOf("available")>-1&&(reservationLength=60,startDate=dateStr?Date.fromISO(dateStr):!1,isNaN(startDate)&&(startDate=parseJsonDate(dateStr)),!isNaN(startDate)&&startHour&&(startDate.setHours(startHour),startDate.setMinutes(firstHourHalf?0:30)),ev={id:"",workspace_id:params.Workspace.Id,venue_id:params.VenueId},startDate&&(endDate=new Date(startDate),endDate=new Date(endDate.setMinutes(endDate.getMinutes()+parseInt(reservationLength))),ev.start_date=startDate,ev.end_date=endDate),LSHelper.Calendar.editReservation({ev:ev,daysAhead:LSHelper.Constants.reservationSearchDaysAhead(),reservationSourcePage:LSHelper.Calendar.reservationSourceNames.WPP,exactDateAndTimeSpecified:!!(!isNaN(startDate)&&startHour)}))};this.SearchFilter=ko.mapping.fromJS(params.SearchFilter);this.SearchFilter.StartTime(Date.fromISO(params.SearchFilter.StartTime));this.SearchFilter.ReservationStart=new LiquidSpace.Search.TimeSpan(params.SearchFilter.ReservationStart);this.SearchFilter.ReservationLengthMinutes=new LiquidSpace.Search.Duration(params.SearchFilter.ReservationLengthMinutes);this.timeChangedByUser=function(){var result=_self.SearchFilter.ReservationStart.minutes()!=new LiquidSpace.Search.TimeSpan(params.SearchFilter.ReservationStart).minutes()||_self.SearchFilter.ReservationLengthMinutes.minutes()!=new LiquidSpace.Search.Duration(params.SearchFilter.ReservationLengthMinutes).minutes(),initialDate;return _self.SearchFilter.StartTime()&&(initialDate=Date.fromISO(params.SearchFilter.StartTime),result=isNaN(initialDate)?!0:result||_self.SearchFilter.StartTime().getTime()!=Date.fromISO(params.SearchFilter.StartTime).getTime()),result};this.startDateVisible=ko.observable(!1);this.toggleStartDateVisibility=function(){_self.startDateVisible(!_self.startDateVisible())};this.startDateDisplay=ko.computed(function(){var date=new Date(_self.SearchFilter.StartTime()),prefix="DATE: ",bookingMethod=params.Workspace.LaunchedReservationTypeStatus;return bookingMethod==Enum.BookingMethod.InquireNow?prefix="MOVE-IN: ":params.Workspace.ReservationMethod==Enum.WorkspaceReservationMethod.Period&&(params.Workspace.NeedToDoRequest||(prefix="MOVE-IN: ")),prefix+(date.isSameDay(params.VenueNowDate)?"Today, ":"")+date.format("MMM d")});this.datepickerOptions={showOn:"both",buttonImageOnly:!1,useDateObjectForObservable:!0,minDate:params.Workspace.IsInquiryOnly?params.NextBusinessDay:params.VenueNowDate,dayNamesMin:["S","M","T","W","T","F","S"],onSelect:function(){_self.startDateVisible(!1)}};this.timesVisibility=ko.observable(!1);this.toggleTimesVisibility=function(){_self.timesVisibility(!_self.timesVisibility())};this.timesDisplay=ko.computed(function(){var result="",length=_self.SearchFilter.ReservationLengthMinutes.minutes(),lengthText=_self.SearchFilter.ReservationLengthMinutes.text(),startTime=_self.SearchFilter.ReservationStart.minutes();if($.isNumeric(startTime)){var startTimeDate=new Date(0,0,0).addMinutes(startTime),endTimeDate=new Date(startTimeDate).addMinutes(length),writeMinutes=startTimeDate.getMinutes()||endTimeDate.getMinutes(),writeAMPM=startTimeDate.toString("tt")!=endTimeDate.toString("tt");result=writeMinutes?startTimeDate.toString("h:mm tt")+" - "+endTimeDate.toString("h:mm tt"):writeAMPM?startTimeDate.toString("h tt")+" - "+endTimeDate.toString("h tt"):startTimeDate.toString("h")+" - "+endTimeDate.toString("h tt")}else result=lengthText;return"時間帯: "+result});this.startTimeVisible=ko.observable(!1);this.toggleStartTimeVisibility=function(){_self.startTimeVisible(!_self.startTimeVisible())};this.startTimeDisplay=ko.computed(function(){return"From: "+_self.SearchFilter.ReservationStart.dayTimeText()});this.endTimeVisible=ko.observable(!1);this.toggleEndTimeVisibility=function(){_self.endTimeVisible(!_self.endTimeVisible())};this.endTimeDisplay=ko.computed(function(){var startTime=_self.SearchFilter.ReservationStart.minutes(),length=_self.SearchFilter.ReservationLengthMinutes.minutes(),startTimeDate=new Date(0,0,0).addMinutes(startTime),endTimeDate=new Date(startTimeDate).addMinutes(length);return"To: "+endTimeDate.toString("h:mm tt")});this.reservationStartList=ko.observable([]);this.reservationEndList=ko.observable([]);this.reservationStartListFiltered=ko.computed(function(){return _self.reservationStartList()});this.reservationEndListFiltered=ko.computed(function(){return _self.reservationEndList().filter(function(e){return e.Value>_self.SearchFilter.ReservationStart.timeSpan()})});this.selectReservationStartTime=function(selectListItem){_self.SearchFilter.ReservationStart.timeSpan(selectListItem.Value);_self.startTimeVisible(!1)};this.selectReservationEndTime=function(selectListItem){var startMinutes=_self.SearchFilter.ReservationStart.minutes(),endMinutes=new LiquidSpace.Search.TimeSpan(selectListItem.Value).minutes();_self.SearchFilter.ReservationLengthMinutes.minutes(endMinutes-startMinutes);_self.endTimeVisible(!1)};this.openHoursList=ko.observable([]);this.selectedTourTimeItem=ko.observable();this.tourTimeDisplay=ko.computed(function(){var selectedTourTimeItem=_self.selectedTourTimeItem();return selectedTourTimeItem?"時間帯: "+selectedTourTimeItem.Text:null});this.tourTimeVisible=ko.observable(!1);this.toggleTourTimeVisibility=function(){_self.tourTimeVisible(!_self.tourTimeVisible())};params.Workspace.ReservationMethod==Enum.WorkspaceReservationMethod.SpecificTimePeriod?ko.computed(function(){var date=new Date(_self.SearchFilter.StartTime());date&&$.ajax({url:"/Calendar/AvailableHours",type:"POST",data:{venueId:params.VenueId,workspaceId:params.Workspace.Id,date:date.toServerString()},success:function(result){_self.reservationStartList(result.startList);_self.reservationEndList(result.endList);result.startList.length&&!result.startList.filter(function(val){return val.Value==_self.SearchFilter.ReservationStart.timeSpan()}).length&&_self.SearchFilter.ReservationStart.timeSpan(result.startList[0].Value)}})}).extend({throttle:100}):params.Workspace.ReservationMethod==Enum.WorkspaceReservationMethod.Period&&(tourTimeInitialLoad=!0,ko.computed(function(){var date=new Date(_self.SearchFilter.StartTime());date&&$.ajax({url:"/Availability/OpenHours",type:"POST",data:{venueId:params.VenueId,workspaceId:params.Workspace.Id,date:date.toServerString()},success:function(result){_self.openHoursList(result.map(function(item){return $.extend({isSelected:ko.computed(function(){return _self.selectedTourTimeItem()&&item.Value==_self.selectedTourTimeItem().Value}),isNotSelected:ko.computed(function(){return!_self.selectedTourTimeItem()||item.Value!=_self.selectedTourTimeItem().Value}),select:function(){_self.selectedTourTimeItem(item);_self.SearchFilter.ReservationStart.timeSpan(item.Value);_self.tourTimeVisible(!1)}},item)}));tourTimeInitialLoad&&(tourTimeInitialLoad=!1,_self.selectedTourTimeItem(result[0]))}})}).extend({throttle:100}));this.availabilityWormDatepickerOptions={useDateObjectForObservable:!0,minDate:params.VenueNowDate,dateFormat:"M d"};this.availabilityWormLoading=ko.observable(!1);this.availabilityWormStartTime=ko.observable(this.SearchFilter.StartTime());this.availabilityWormStartTime.subscribe(function(date){_self.availabilityWormLoading(!0);$.ajax({type:"POST",url:"/Venues/WorkspaceLandingPageCalculateAvailability",data:{venueId:params.VenueId,workspaceId:params.Workspace.Id,startDate:date.toServerString()},success:function(data){params.Workspace.NextAvailabilityWormClassList(data)},complete:function(){_self.availabilityWormLoading(!1)}})});this.calendarLink=ko.computed(function(){var date=new Date(_self.SearchFilter.StartTime());return"/Calendar/IndexByVenue/"+params.VenueId+"?lsOrig=true&date="+date.toServerString()});this.bookIt=function(){var startDate=new Date(_self.SearchFilter.StartTime()),endDate;startDate.addMinutes(_self.SearchFilter.ReservationStart.minutes());endDate=new Date(startDate);endDate.addMinutes(_self.SearchFilter.ReservationLengthMinutes.minutes());LSHelper.Calendar.editReservation({ev:{id:"",workspace_id:params.Workspace.Id,venue_id:params.VenueId,start_date:startDate,end_date:endDate},daysAhead:LSHelper.Constants.reservationSearchDaysAhead(),reservationSourcePage:LSHelper.Calendar.reservationSourceNames.WPP,exactDateAndTimeSpecified:_self.SearchFilter.ReservationStart.minutes()!=null})};this.actionButtonState=function(){var result={label:"Not Available",disabled:!0},bookingMethod=params.Workspace.LaunchedReservationTypeStatus,label;return params.Workspace.Booked?result={label:"Booked",disabled:!0}:params.Workspace.BookItButtonState=="permission-pending"?result={label:"Permission Pending",disabled:!0}:params.Workspace.BookItButtonState!="unavailable"&&(params.Workspace.NeedToDoRequest?(label="Request",bookingMethod==Enum.BookingMethod.RequestToBook?label="Schedule a Tour":bookingMethod==Enum.BookingMethod.InquireNow&&(label="Inquire"),result={label:label,disabled:!1}):result=params.VisaState==Enum.VisaState.Denied?{label:"Booking Declined",disabled:!0}:params.Workspace.ReservationMethod==Enum.WorkspaceReservationMethod.Period?params.WorkspaceBookedByMember||bookingMethod==Enum.BookingMethod.BookItNow?{label:"Book It Now",disabled:!1}:{label:"Complete Booking",disabled:!1}:{label:"Book It Now",disabled:!1}),result};this.action=function(){var startDate=new Date(_self.SearchFilter.StartTime()),bookingMethod;startDate.addMinutes(_self.SearchFilter.ReservationStart.minutes());params.Workspace.NeedToDoRequest?(bookingMethod=params.Workspace.LaunchedReservationTypeStatus,bookingMethod==Enum.BookingMethod.RequestToBook?_self.requestTour(params.Workspace.Id,_self.timeChangedByUser()?startDate:null):bookingMethod==Enum.BookingMethod.InquireNow&&_self.inquire(params.Workspace.Id,startDate)):_self.bookIt()};this.isActionInquire=params.Workspace.BookItButtonState!="unavailable"&&params.Workspace.LaunchedReservationTypeStatus==Enum.BookingMethod.InquireNow;this.autorenewTooltip="You will be automatically billed on the 1st of each month. Book today with the freedom to cancel within 24 hours. If your plans change in the future, just provide a 30 day notice to LiquidSpace to end your reservation.";this.otherFavoritesCount=ko.observable(params.OtherFavoritesCount);this.favorited=ko.observable(params.Workspace.Favorited);this.favorite=function(event,workspaceId,venueId){LSHelper.Favorites.processEvent(event,workspaceId,venueId,function(workspaceId,venueId,favorited){_self.favorited(favorited)})};this.favoriteStats=ko.computed(function(){var favorited=_self.favorited(),otherFavoritesCount=_self.otherFavoritesCount();return favorited||otherFavoritesCount?favorited?otherFavoritesCount?"You and "+otherFavoritesCount+" people favorited this space":"You favorited this space":otherFavoritesCount+" people favorited this space":""});this.toggleAmenities=function(elem){var $elem=$(elem),$sectoion=$(".wlp-amenities"),expandClass="expanded";$sectoion.hasClass(expandClass)?($sectoion.removeClass(expandClass),$elem.text("See More")):($sectoion.addClass(expandClass),$elem.text("See Less"))};this.toggleActionList=function(elem){var $elem=$(elem),$popup=$(".workspace-actions-modal.wlp-action-list");$popup.show();$elem.unbind("clickoutside.morelinks");$elem.bind("clickoutside.morelinks",function(){$popup.hide()})}} 